<!DOCTYPE html>
<html>
<head>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>selectList</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        html, body {
            width: 100%;
            height: 100%;
        }

    </style>
    <script type="text/javascript" src="js/jquery-3.3.1.js"></script>
</head>
<body>
<div class="selectList">
    <select class="province">
        <option>请选择</option>
    </select>
    <select class="city">
        <option>请选择</option>
    </select>
    <select class="district">
        <option>请选择</option>
    </select>
</div>
<script type="text/javascript">
    $(function () {
        $(".selectList").each(function () {
            var url = "address.json";
            var addressJson;
            var temp_html;
            var oProvince = $(this).find(".province");
            var oCity = $(this).find(".city");
            var oDistrict = $(this).find(".district");
            //初始化省
            var province = function () {
                $.each(addressJson, function (i, province) {
                    temp_html += "<option value='" + province.p + "'>" + province.p + "</option>";
                });
                oProvince.html(temp_html);
                city();
            };
            //赋值市
            var city = function () {
                temp_html = "";
                var n = oProvince.get(0).selectedIndex;
                $.each(addressJson[n].c, function (i, city) {
                    temp_html += "<option value='" + city.ct + "'>" + city.ct + "</option>";
                });
                oCity.html(temp_html);
                district();
            };
            //赋值县
            var district = function () {
                temp_html = "";
                var m = oProvince.get(0).selectedIndex;
                var n = oCity.get(0).selectedIndex;
                if (typeof (addressJson[m].c[n].d) == "undefined") {
                    oDistrict.css("display", "none");
                } else {
                    oDistrict.css("display", "inline");
                    $.each(addressJson[m].c[n].d, function (i, district) {
                        temp_html += "<option value='" + district.dt + "'>" + district.dt + "</option>";
                    });
                    oDistrict.html(temp_html);
                }
                ;
            };
            //选择省改变市
            oProvince.change(function () {
                city();
            });
            //选择市改变县
            oCity.change(function () {
                district();
            });
            //获取json数据
            $.getJSON(url, function (data) {
                addressJson = data;
                province();
            });
        });
    });
</script>
</body>
</html>
